<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title> New Document </title>
  <meta name="Generator" content="EditPlus">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <style type="text/css">
	div{
		width:200px;
		height:100px;
		border:1px solid blue;
	}
  </style>
 </head>

 <body>
 <div></div>
  <script type="text/javascript">
  <!--
  /*
  动态创建的script不会阻塞页面加载，但静态script会阻塞页面渲染
  */
	var num = 0;
	for(var i = 0;i<2;i++){
		var loadScript = document.createElement('script');
		document.getElementsByTagName('head')[0].appendChild(loadScript);
		loadScript.src = 'http://js.tonny.com/test/dynamicJS.js?r='+Math.random();
	}
  //-->
  </script>
  <script src = 'http://js.tonny.com/test/dynamicJS.js?r=abctest123'></script>
  <div></div>
<img src="http://img.fandongxi.com/cms/111219/4136215801f14983d1b496a5de646d3f.jpg?r=estfasdfasdf"/>
<textarea style="width:600px;height:300px">
var css;

function include_css(css_file) {
	var html_doc = document.getElementsByTagName('head')[0];
	css = document.createElement('link');
	css.setAttribute('rel', 'stylesheet');
	css.setAttribute('type', 'text/css');
	css.setAttribute('href', css_file);
	html_doc.appendChild(css);     
	css.onreadystatechange = function() {
		if (css.readyState == 'complete') {
			alert('CSS onreadystatechange fired');
		}
	}
	css.onload = function() {
		alert('CSS onload fired');
	}
	return false;
}

/**************************/
var js;

function include_js(file) {
	var html_doc = document.getElementsByTagName('head')[0];
	js = document.createElement('script');
	js.setAttribute('type', 'text/javascript');
	js.setAttribute('src', file);
	html_doc.appendChild(js);
	js.onreadystatechange = function() {
		if (js.readyState == 'complete') {
			alert('JS onreadystate fired');
		}
	}
	js.onload = function() {
		alert('JS onload fired');
	}
	return false;
}

/**************************/

var img = new Image();
img.onload = function() {
	alert('loaded--');
}
img.onerror = function() {
	alert('error');
}
img.onreadystatechange = function() {
	alert(this.readyState)
}
img.src = $('img').get(0).src; //+'asdf';



</textarea>
 </body>
</html>
