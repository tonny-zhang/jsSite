(function(d){d.suggest=function(h,a){function j(){var a=e.offset();c.css({top:a.top+h.offsetHeight+"px",left:a.left+"px"})}function r(b,c){var f=[];if(c.length>0)for(i in b)name=(b[i]+"").toLowerCase(),num=name.indexOf(c),num>-1&&f.push(b[i]);return f.join(a.delimiter)}function o(b,n){c.hide();var f=s(b,n);p(f);for(var d=b.length;g.length&&l+d>a.maxCacheSize;){var e=g.pop();l-=e.size}g.push({q:n,size:d,items:f});l+=d}function t(){var b=d.trim(e.val());b.length>=a.minchars?(cached=u(b))?p(cached.items):
d.isArray(a.source)?o(r(a.source,b),b):d.get(a.source,{q:b},function(a){o(a,b)}):c.hide()}function u(a){for(var c=0;c<g.length;c++)if(g[c].q==a)return g.unshift(g.splice(c,1)[0]),g[0];return false}function p(b){if(b)if(b.length){for(var e="",f=0;f<b.length;f++)e+="<li>"+b[f]+"</li>";c.html(e).show();j();c.children("li").mouseover(function(){c.children("li").removeClass(a.selectClass);d(this).addClass(a.selectClass)}).click(function(a){a.preventDefault();a.stopPropagation();q()})}else c.hide()}function s(b,
c){for(var f=[],e=b.split(a.delimiter),g=0;g<e.length;g++){var h=d.trim(e[g]);h&&(h=h.replace(RegExp(c,"ig"),function(b){return'<span class="'+a.matchClass+'">'+b+"</span>"}),f[f.length]=h)}return f}function k(){if(!c.is(":visible"))return false;var b=c.children("li."+a.selectClass);b.length||(b=false);return b}function q(){if($currentResult=k())e.val($currentResult.text()),c.hide(),a.onSelect&&a.onSelect.apply(e[0])}var e=d(h).attr("autocomplete","off"),c=d(document.createElement("ul")),m=false,
g=[],l=0;c.addClass(a.resultsClass).appendTo("body");j();d(window).load(j).resize(j);e.blur(function(){setTimeout(function(){c.hide()},200)});try{c.bgiframe()}catch(v){}e.keyup(function(b){if(/27$|38$|40$/.test(b.which)&&c.is(":visible")||/^13$|^9$/.test(b.which)&&k())switch(b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation(),b.cancelBubble=true,b.returnValue=false,b.which){case 38:($currentResult=k())?$currentResult.removeClass(a.selectClass).prev().addClass(a.selectClass):
c.children("li:last-child").addClass(a.selectClass);break;case 40:($currentResult=k())?$currentResult.removeClass(a.selectClass).next().addClass(a.selectClass):c.children("li:first-child").addClass(a.selectClass);break;case 9:case 13:q();break;case 27:c.hide()}else a.onFenLi&&/^13$|^188$|^44$/.test(b.which)?(c.hide(),a.onFenLi.apply(e[0])):(m&&clearTimeout(m),m=setTimeout(t,a.delay))})};d.fn.suggest=function(h,a){if(h)return a=a||{},a.source=h,a.delay=a.delay||1,a.resultsClass=a.resultsClass||"ac_results",
a.selectClass=a.selectClass||"ac_over",a.matchClass=a.matchClass||"ac_match",a.minchars=a.minchars||1,a.delimiter=a.delimiter||"\n",a.onSelect=a.onSelect||false,a.onFenLi=a.onFenLi||false,a.maxCacheSize=a.maxCacheSize||65536,this.each(function(){new d.suggest(this,a)}),this}})(jQuery);
