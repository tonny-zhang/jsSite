<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title> New Document </title>
  <meta name="Generator" content="EditPlus">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <script src="js/jquery-1.6.4.min.js"></script>
  <style>
	.showResult{width:200px;height:50px;border:1px solid blue;}
  </style>
 </head>

 <body>
  <iframe src="" id="one"></iframe>
  <iframe src="" id="two"></iframe>
   <iframe src="" id="three"></iframe>
  <div class="showResult"></div>
  <script>
		function showMsg(msg){
			$(".showResult").html($(".showResult").html()+msg+"<br/>");
		}
		var ciShu = 1;
		var val = {};
		dtd = $.Deferred();	
		$("iframe").bind("load",function(){
			showMsg("load"+$(this).attr('id'));
			val[$(this).attr('id')] = true;//alert(val);
		});//$(".showResult").trigger("load");
		$.when((function(){
			$("#one").attr("src","http://www.yuegouok.com");
			if(!val["one"]){
				dtd.resolve();
			}
			return dtd.promise();
		})()).then((function(){
			$("#two").attr("src","http://www.baidu.com");
			if(!val["two"]){
				dtd.resolve();
			}
			return dtd.promise();
		})()).done(function(){
			$("#three").attr("src","http://www.google.com.hk");
			if(!val["three"]){
				dtd.resolve();
			}
			return dtd.promise();
		});
		setTimeout(function(){
			/*$.when((function(){
				$(".showResult").trigger("load");
			})()).then((function(){
				var one = new Date().getTime();
				while(true){
					if(new Date().getTime()-one >1000*3){
						break;
					}
				}
				$(".showResult").html($(".showResult").html()+"then<br/>");
			})()).done(function(){
				$(".showResult").html($(".showResult").html()+"done<br/>");
			});*/
			/*$("iframe").trigger("load");
			var one = new Date().getTime();
			while(true){
				if(new Date().getTime()-one >1000*3){
					break;
				}
			}
			$(".showResult").html($(".showResult").html()+"then<br/>");
			$(".showResult").html($(".showResult").html()+"done<br/>");*/
		},1000);

		
  </script>
 </body>
</html>
